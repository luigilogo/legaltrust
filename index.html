
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegalTrust | Misura la tua integrit√†</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        :root {
            --primary-color: #3b5998;
            --secondary-color: #f7f7f7;
            --text-color: #333;
            --light-text: #fff;
            --gradient-bg: linear-gradient(135deg, #3b5998, #8b9dc3);
            --shadow-effect: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition-fast: 0.3s ease-in-out;
            --transition-slow: 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            color: var(--text-color);
            background-color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 5%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-effect);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: var(--gradient-bg);
            color: var(--light-text);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), transparent, transparent);
            animation: flow 15s linear infinite;
            z-index: 1;
        }

        @keyframes flow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .score-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin: 40px auto;
        }
        
        .score-wrapper {
            position: relative;
            width: 280px;
            height: 280px;
        }

        #score-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            font-weight: 700;
        }
        
        .score-breakdown {
            width: 350px;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            box-shadow: var(--shadow-effect);
            text-align: left;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s, transform 1s;
        }

        .score-breakdown.active {
            opacity: 1;
            transform: translateY(0);
        }

        .bar-container {
            margin-bottom: 15px;
        }

        .bar-label {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background-color: #fff;
            width: 0;
            transition: width 1.5s var(--transition-slow);
        }

        .section {
            padding: 80px 5%;
            text-align: center;
        }

        .dark-section {
            background-color: #222;
            color: var(--light-text);
        }

        .blockchain-animation {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 50px 0;
            flex-wrap: nowrap; /* Mantiene gli elementi su una singola riga */
            overflow-x: auto;
            white-space: nowrap;
        }

        .blockchain-node {
            display: inline-block;
            flex-direction: column;
            align-items: center;
            text-align: center;
            background-color: var(--secondary-color);
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-effect);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s var(--transition-slow);
            margin: 10px;
            white-space: normal;
        }

        .blockchain-node.active {
            opacity: 1;
            transform: translateY(0);
        }

        .blockchain-arrow {
            display: inline-block;
            font-size: 2em;
            color: var(--primary-color);
            margin: 0 10px;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); opacity: 0.7; }
            to { transform: scale(1.1); opacity: 1; }
        }

        .chart-container, .balance-container {
            max-width: 900px;
            margin: 50px auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 40px;
        }

        .risk-info, .balance-info {
            max-width: 400px;
            text-align: left;
        }

        .dot {
            height: 15px;
            width: 15px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        .dot.high { background-color: #ff6384; }
        .dot.medium { background-color: #ffcd56; }
        .dot.low { background-color: #4bc0c0; }

        .risk-list {
            list-style: none;
            padding: 0;
            text-align: left;
            margin-top: 20px;
            border-left: 3px solid #ff6384;
            padding-left: 15px;
        }

        .risk-list li {
            margin-bottom: 10px;
            font-size: 0.9em;
            opacity: 0;
            transform: translateY(10px);
            animation: fade-in-up 0.5s forwards;
        }

        .risk-name {
            font-weight: 600;
            color: #ff6384;
        }

        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        #ai-network {
            background-color: #2b2b2b;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="logo">LegalTrust</div>
        <nav class="nav">
            <a href="#score">Score</a>
            <a href="#blockchain">Trasparenza</a>
            <a href="#ai">Analisi AI</a>
            <a href="#bilancio">Bilancio</a>
        </nav>
    </header>

    <main>
        <section id="score" class="hero-section">
            <h1>Il tuo LegalScore. La tua Garanzia.</h1>
            <div class="score-container">
                <div class="score-wrapper">
                    <canvas id="score-canvas"></canvas>
                    <div id="legalScoreValue" class="score-value" data-final-score="95">0</div>
                    <p class="score-label">LegalScore‚Ñ¢</p>
                </div>
                <div class="score-breakdown">
                    <h3>Dettaglio del Punteggio</h3>
                    <div class="bar-container">
                        <div class="bar-label"><span>Governance & Compliance</span> <span class="score-percent">0%</span></div>
                        <div class="bar"><div class="bar-fill" data-score="95"></div></div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label"><span>Tracciabilit√† di Filiera</span> <span class="score-percent">0%</span></div>
                        <div class="bar"><div class="bar-fill" data-score="90"></div></div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label"><span>Analisi Finanziaria</span> <span class="score-percent">0%</span></div>
                        <div class="bar"><div class="bar-fill" data-score="85"></div></div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label"><span>Rete Fornitori (AI)</span> <span class="score-percent">0%</span></div>
                        <div class="bar"><div class="bar-fill" data-score="92"></div></div>
                    </div>
                </div>
            </div>
            <p class="score-description">Un punteggio dinamico che certifica l'integrit√† della tua azienda, basato su un'analisi multidimensionale.</p>
        </section>

        <section id="blockchain" class="section">
            <h2>Trasparenza Immutabile.</h2>
            <p>Ogni passo della tua filiera, un blocco di fiducia.</p>
            <div class="blockchain-animation">
                </div>
        </section>

        <section id="ai" class="section dark-section">
            <h2>Intelligenza Artificiale. Zero Punti Ciechi.</h2>
            <p>La nostra IA analizza milioni di dati per mappare la tua rete di fornitori e identificare rischi nascosti.</p>
            <div class="chart-container">
                <canvas id="ai-network"></canvas>
            </div>
        </section>

        <section id="bilancio" class="section">
            <h2>Salute Finanziaria & Integrit√† Legale.</h2>
            <p>Una solida governance non √® solo etica, √® anche un vantaggio competitivo che si riflette nei bilanci.</p>
            <div class="balance-container">
                <div class="balance-info">
                    <h3>Indicatori e Interpretazione</h3>
                    <p>La nostra analisi incrocia il **LegalScore** con gli indicatori di bilancio per fornire una visione completa della solidit√† aziendale.</p>
                    <div class="indicator-data">
                        <p><strong>ROE:</strong> <span class="indicator-value roe">0%</span></p>
                        <p><strong>ROI:</strong> <span class="indicator-value roi">0%</span></p>
                        <p><strong>D/E Ratio:</strong> <span class="indicator-value de-ratio">0%</span></p>
                        <p class="analysis-comment">Un alto LegalScore (<span class="score-percent">95%</span>) √® correlato a un'elevata redditivit√† del capitale (ROE) e a una gestione efficiente del debito (D/E Ratio), dimostrando la solidit√† e l'affidabilit√† dell'azienda.</p>
                    </div>
                </div>
                <canvas id="balanceChart"></canvas>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.id === 'score') {
                            animateScore(95);
                            drawScoreCircle();
                            animateScoreBreakdown();
                        } else if (entry.target.id === 'blockchain') {
                            animateBlockchain();
                        } else if (entry.target.id === 'ai') {
                            initAINetwork();
                        } else if (entry.target.id === 'bilancio') {
                            animateBalanceAnalysis();
                        }
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            observer.observe(document.getElementById('score'));
            observer.observe(document.getElementById('blockchain'));
            observer.observe(document.getElementById('ai'));
            observer.observe(document.getElementById('bilancio'));

            // Funzioni di Animazione e Logica
            
            function animateScore(finalScore) {
                const scoreElement = document.getElementById('legalScoreValue');
                const duration = 2000;
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    scoreElement.textContent = Math.floor(progress * finalScore);
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            }

            function drawScoreCircle() {
                const canvas = document.getElementById('score-canvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                const finalScore = parseInt(document.getElementById('legalScoreValue').dataset.final-score, 10);
                const radius = canvas.width / 2 - 10;
                const endAngle = (2 * Math.PI) * (finalScore / 100);
                let startTimestamp = null;

                function animate(timestamp) {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / 2000, 1);
                    const angle = progress * endAngle;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, canvas.height / 2, radius, 0, 2 * Math.PI);
                    ctx.lineWidth = 15;
                    ctx.strokeStyle = '#e0e0e0';
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, canvas.height / 2, radius, -Math.PI / 2, -Math.PI / 2 + angle);
                    ctx.lineWidth = 15;
                    ctx.strokeStyle = '#3b5998';
                    ctx.stroke();
                    if (progress < 1) {
                        window.requestAnimationFrame(animate);
                    }
                }
                window.requestAnimationFrame(animate);
            }
            
            function animateScoreBreakdown() {
                const breakdown = document.querySelector('.score-breakdown');
                breakdown.classList.add('active');
                const bars = document.querySelectorAll('.bar-fill');
                bars.forEach(bar => {
                    const score = bar.dataset.score;
                    bar.style.width = `${score}%`;
                    const percentSpan = bar.closest('.bar-container').querySelector('.score-percent');
                    let current = 0;
                    const interval = setInterval(() => {
                        if (current >= score) {
                            clearInterval(interval);
                            percentSpan.textContent = `${score}%`; // Assicura che il valore finale sia preciso
                        } else {
                            current++;
                            percentSpan.textContent = `${current}%`;
                        }
                    }, 20);
                });
            }

            function animateBlockchain() {
                const container = document.querySelector('.blockchain-animation');
                const nodesData = [
                    { icon: 'üçá', label: 'Origine: "Vigneto Siciliano"', data: 'ID Lotto: #F37A' },
                    { icon: 'üç∑', label: 'Lavorazione: "Cantine Legali S.p.a."', data: 'Data: 15/08/2025' },
                    { icon: 'üì¶', label: 'Logistica: "Spedizioni Trasparenti Ltd."', data: 'Codice: A4F-98Y' },
                    { icon: 'üèõÔ∏è', label: 'Certificazione: "LegalTrust"', data: 'Esito: Conforme' }
                ];

                container.innerHTML = ''; // Pulisce il contenitore prima di animare
                nodesData.forEach((nodeData, index) => {
                    const node = document.createElement('div');
                    node.className = 'blockchain-node';
                    node.innerHTML = `
                        <div class="icon">${nodeData.icon}</div>
                        <p>${nodeData.label}</p>
                        <small>${nodeData.data}</small>
                    `;
                    container.appendChild(node);
                    if (index < nodesData.length - 1) {
                        const arrow = document.createElement('div');
                        arrow.className = 'blockchain-arrow';
                        arrow.innerHTML = '&#8594;';
                        container.appendChild(arrow);
                    }
                    setTimeout(() => {
                        node.classList.add('active');
                    }, index * 500);
                });
            }

            // Aggiunta libreria P5.js per la simulazione del network AI
            function initAINetwork() {
                const sketch = (p) => {
                    let nodes = [];
                    let connections = [];
                    let riskNodes = [];

                    p.setup = () => {
                        const canvasParent = document.getElementById('ai-network').parentElement;
                        p.createCanvas(canvasParent.offsetWidth, 400).parent('ai-network');
                        p.noLoop();

                        nodes.push(new Node(p.width / 2, p.height / 2, 'Azienda', p.color('#fff')));
                        nodes.push(new Node(p.random(p.width / 4, p.width * 3 / 4), p.random(p.height / 4, p.height * 3 / 4), 'Fornitore 1', p.color('#4bc0c0')));
                        nodes.push(new Node(p.random(p.width / 4, p.width * 3 / 4), p.random(p.height / 4, p.height * 3 / 4), 'Fornitore 2', p.color('#ffcd56')));
                        nodes.push(new Node(p.random(p.width / 4, p.width * 3 / 4), p.random(p.height / 4, p.height * 3 / 4), 'Fornitore 3', p.color('#ff6384')));

                        connections.push({ from: nodes[0], to: nodes[1] });
                        connections.push({ from: nodes[0], to: nodes[2] });
                        connections.push({ from: nodes[0], to: nodes[3] });
                        connections.push({ from: nodes[2], to: nodes[3] }); // Connessione di rischio

                        setTimeout(() => {
                            p.loop();
                        }, 500);

                        setTimeout(() => {
                             const infoContainer = document.querySelector('#ai .risk-info');
                            infoContainer.innerHTML = `
                                <h3>Analisi Approfondita</h3>
                                <p>Il nostro algoritmo ha identificato **1 connessione ad alto rischio**.</p>
                                <ul class="risk-list">
                                    <li style="animation-delay: 0s;"><span class="risk-name">Fornitore 2</span>: Collegato a rete di alto rischio (Fornitore 3).</li>
                                </ul>
                            `;
                            riskNodes.push(nodes[2]);
                            riskNodes.push(nodes[3]);
                        }, 3000);
                    };

                    p.draw = () => {
                        p.background('#222');
                        p.strokeWeight(1);
                        p.stroke(200);

                        for (let conn of connections) {
                            p.line(conn.from.x, conn.from.y, conn.to.x, conn.to.y);
                        }

                        p.noStroke();
                        for (let node of nodes) {
                            node.display();
                        }

                        // Animazione nodi di rischio
                        if (riskNodes.length > 0) {
                            for (let node of riskNodes) {
                                p.fill(p.color(255, 0, 0, 150));
                                p.noStroke();
                                p.ellipse(node.x, node.y, node.size * (1.2 + p.sin(p.frameCount * 0.1) * 0.1));
                            }
                        }

                        for (let i = 0; i < nodes.length; i++) {
                            for (let j = i + 1; j < nodes.length; j++) {
                                let d = p.dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
                                let attract = (p.width * p.height) / (d * d * 100);
                                let repel = (nodes[i].size * nodes[j].size) / (d * d);
                                let force = attract - repel;
                                let dx = nodes[j].x - nodes[i].x;
                                let dy = nodes[j].y - nodes[i].y;
                                nodes[i].vx += force * dx;
                                nodes[i].vy += force * dy;
                                nodes[j].vx -= force * dx;
                                nodes[j].vy -= force * dy;
                            }
                            nodes[i].update();
                        }
                    };

                    class Node {
                        constructor(x, y, label, color) {
                            this.x = x;
                            this.y = y;
                            this.vx = 0;
                            this.vy = 0;
                            this.size = 20;
                            this.label = label;
                            this.color = color;
                        }

                        update() {
                            this.x += this.vx;
                            this.y += this.vy;
                            this.vx *= 0.95;
                            this.vy *= 0.95;
                            this.x = p.constrain(this.x, 20, p.width - 20);
                            this.y = p.constrain(this.y, 20, p.height - 20);
                        }

                        display() {
                            p.fill(this.color);
                            p.ellipse(this.x, this.y, this.size);
                            p.fill(255);
                            p.textAlign(p.CENTER, p.CENTER);
                            p.textSize(10);
                            p.text(this.label, this.x, this.y + this.size / 2 + 5);
                        }
                    }
                };

                new p5(sketch);
            }

            function animateBalanceAnalysis() {
                const roeElement = document.querySelector('.indicator-value.roe');
                const roiElement = document.querySelector('.indicator-value.roi');
                const deElement = document.querySelector('.indicator-value.de-ratio');

                function animateValue(element, finalValue, duration = 1500) {
                    let start = 0;
                    const increment = finalValue / (duration / 10);
                    let current = start;
                    const interval = setInterval(() => {
                        current += increment;
                        if (current >= finalValue) {
                            clearInterval(interval);
                            element.textContent = `${finalValue}%`;
                        } else {
                            element.textContent = `${Math.floor(current)}%`;
                        }
                    }, 10);
                }

                animateValue(roeElement, 15);
                animateValue(roiElement, 12);
                animateValue(deElement, 40);

                const ctx = document.getElementById('balanceChart').getContext('2d');
                if (window.balanceChart) {
                    window.balanceChart.destroy();
                }
                const data = {
                    labels: ['Governance', 'LegalScore', 'Performance Finanziaria'],
                    datasets: [{
                        label: 'Correlazione',
                        data: [95, 95, 85],
                        backgroundColor: [
                            '#3b5998',
                            '#4bc0c0',
                            '#ffcd56'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }]
                };

                window.balanceChart = new Chart(ctx, {
                    type: 'bar',
                    data: data,
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            title: {
                                display: true,
                                text: 'Correlazione tra Legalit√† e Performance'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
