<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegalTrust | Misura la tua integrit√†</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        :root {
            --primary-color: #3b5998;
            --secondary-color: #f7f7f7;
            --text-color: #333;
            --light-text: #fff;
            --gradient-bg: linear-gradient(135deg, #3b5998, #8b9dc3);
            --shadow-effect: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition-fast: 0.3s ease-in-out;
            --transition-slow: 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            color: var(--text-color);
            background-color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 5%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-effect);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: var(--gradient-bg);
            color: var(--light-text);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), transparent, transparent);
            animation: flow 15s linear infinite;
            z-index: 1;
        }

        @keyframes flow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .score-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin: 40px auto;
        }
        
        .score-wrapper {
            position: relative;
            width: 280px;
            height: 280px;
        }

        #score-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            font-weight: 700;
        }
        
        .score-breakdown {
            width: 350px;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            box-shadow: var(--shadow-effect);
            text-align: left;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s, transform 1s;
        }

        .score-breakdown.active {
            opacity: 1;
            transform: translateY(0);
        }

        .bar-container {
            margin-bottom: 15px;
        }

        .bar-label {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background-color: #fff;
            width: 0;
            transition: width 1.5s var(--transition-slow);
        }

        .section {
            padding: 80px 5%;
            text-align: center;
        }
        
        .advantages-section {
            padding: 80px 5%;
            background-color: #f7f7f7;
            text-align: left;
        }
        
        .advantage-category {
            margin-bottom: 40px;
        }
        
        .advantage-category h3 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            padding-bottom: 5px;
        }
        
        .advantage-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
        }
        
        .advantage-icon {
            font-size: 2em;
            color: var(--primary-color);
            margin-right: 15px;
            flex-shrink: 0;
        }

        .dark-section {
            background-color: #222;
            color: var(--light-text);
        }

        .blockchain-animation {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 50px 0;
            flex-wrap: nowrap;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .blockchain-node {
            display: inline-block;
            flex-direction: column;
            align-items: center;
            text-align: center;
            background-color: var(--secondary-color);
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-effect);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s var(--transition-slow);
            margin: 10px;
            white-space: normal;
        }

        .blockchain-node.active {
            opacity: 1;
            transform: translateY(0);
        }

        .blockchain-arrow {
            display: inline-block;
            font-size: 2em;
            color: var(--primary-color);
            margin: 0 10px;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); opacity: 0.7; }
            to { transform: scale(1.1); opacity: 1; }
        }

        .chart-container, .balance-container {
            max-width: 900px;
            margin: 50px auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 40px;
        }

        .risk-info, .balance-info {
            max-width: 400px;
            text-align: left;
        }
        
        #ai-network-container {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            position: relative;
        }

        #ai-network-container #ai-network {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        #ai-text-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            text-align: center;
            font-size: 1.5em;
            font-weight: 600;
            animation: fadeInOut 2s infinite;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .risk-list {
            list-style: none;
            padding: 0;
            text-align: left;
            margin-top: 20px;
            border-left: 3px solid #ff6384;
            padding-left: 15px;
        }

        .risk-list li {
            margin-bottom: 10px;
            font-size: 0.9em;
            opacity: 0;
            transform: translateY(10px);
            animation: fade-in-up 0.5s forwards;
        }

        .risk-name {
            font-weight: 600;
            color: #ff6384;
        }

        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="logo">LegalTrust</div>
        <nav class="nav">
            <a href="#score">Score</a>
            <a href="#benefits">Benefici</a>
            <a href="#blockchain">Trasparenza</a>
            <a href="#ai">Analisi AI</a>
            <a href="#bilancio">Bilancio</a>
        </nav>
    </header>

    <main>
        <section id="score" class="hero-section">
            <h1>Il tuo LegalScore. La tua Garanzia.</h1>
            <div class="score-container">
                <div class="score-wrapper">
                    <canvas id="score-canvas"></canvas>
                    <div id="legalScoreValue" class="score-value" data-final-score="95">0</div>
                    <p class="score-label">LegalScore‚Ñ¢</p>
                </div>
                <div class="score-breakdown">
                    <h3>Dettaglio del Punteggio</h3>
                    <div class="bar-container">
                        <div class="bar-label"><span>Governance & Compliance</span> <span class="score-value-breakdown" data-score="20">0</span></div>
                        <div class="bar"><div class="bar-fill" data-score="20"></div></div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label"><span>Trasparenza Capitale Umano</span> <span class="score-value-breakdown" data-score="20">0</span></div>
                        <div class="bar"><div class="bar-fill" data-score="20"></div></div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label"><span>Impatto sul Territorio</span> <span class="score-value-breakdown" data-score="15">0</span></div>
                        <div class="bar"><div class="bar-fill" data-score="15"></div></div>
                    </div>
                    <div class="bar-container">
                        <div class="bar-label"><span>Integrit√† di Filiera & Clienti</span> <span class="score-value-breakdown" data-score="40">0</span></div>
                        <div class="bar"><div class="bar-fill" data-score="40"></div></div>
                    </div>
                </div>
            </div>
            <p class="score-description">Un punteggio dinamico che certifica l'integrit√† della tua azienda, basato su un'analisi multidimensionale.</p>
        </section>

        <section id="benefits" class="advantages-section">
            <h2>Perch√© LegalTrust? I Vantaggi che contano.</h2>
            <p>La nostra consulenza non √® solo una certificazione, ma un vero e proprio investimento nel futuro della tua azienda.</p>
            <div class="advantage-category">
                <h3>Vantaggi Economici e Finanziari</h3>
                <div class="advantage-item">
                    <span class="advantage-icon">üè¶</span>
                    <div>
                        <h4>Accesso Privilegiato al Credito</h4>
                        <p>Un alto **LegalScore** √® una garanzia di affidabilit√†. Banche e istituzioni finanziarie, riducendo il rischio di default, possono offrire **condizioni di credito pi√π favorevoli**, con tassi di interesse pi√π bassi e processi di approvazione pi√π rapidi.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">üõ°Ô∏è</span>
                    <div>
                        <h4>Riduzione dei Premi Assicurativi</h4>
                        <p>Le compagnie assicurative riconoscono la tua integrit√†. La dimostrazione di una gestione solida e trasparente riduce il rischio per l'assicuratore, che premia l'azienda virtuosa con **premi pi√π bassi** sulle polizze.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">üìâ</span>
                    <div>
                        <h4>Ottimizzazione della Gestione dei Rischi</h4>
                        <p>La nostra piattaforma √® uno strumento di analisi del rischio in tempo reale. Potrai identificare e prevenire costose interruzioni della catena di approvvigionamento, sanzioni legali o danni reputazionali causati da associazioni con soggetti a rischio.</p>
                    </div>
                </div>
            </div>
            <div class="advantage-category">
                <h3>Vantaggi Competitivi e di Mercato</h3>
                <div class="advantage-item">
                    <span class="advantage-icon">üèÜ</span>
                    <div>
                        <h4>Differenziazione Competitiva</h4>
                        <p>In un mercato saturo, la legalit√† diventa un fattore di differenziazione. Un'azienda con un alto **LegalScore** pu√≤ promuoversi come un'alternativa sicura e affidabile, guadagnando un vantaggio decisivo sulla concorrenza.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">‚ù§Ô∏è</span>
                    <div>
                        <h4>Fidelizzazione del Cliente</h4>
                        <p>Il nostro sistema di rating permette ai consumatori di scegliere consapevolmente. I clienti sono disposti a premiare le aziende oneste, creando un legame di fiducia duraturo che si traduce in una clientela fedele e in crescita.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">üíº</span>
                    <div>
                        <h4>Vantaggio Negli Appalti Pubblici</h4>
                        <p>I dati di LegalTrust possono semplificare i processi di gara. Le stazioni appaltanti possono pre-selezionare le aziende con un alto **LegalScore**, riducendo la burocrazia e aumentando le tue possibilit√† di successo.</p>
                    </div>
                </div>
            </div>
            <div class="advantage-category">
                <h3>Vantaggi Reputazionali e di "Brand Value"</h3>
                <div class="advantage-item">
                    <span class="advantage-icon">‚ú®</span>
                    <div>
                        <h4>Crescita della Reputazione Aziendale</h4>
                        <p>Essere un'azienda "certificata" dalla nostra piattaforma costruisce una reputazione di integrit√†. Non attiri solo clienti, ma anche i migliori talenti, che cercano di lavorare per aziende con valori forti e una missione chiara.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">üìà</span>
                    <div>
                        <h4>Aumento del Valore del Brand</h4>
                        <p>La reputazione di legalit√† e trasparenza si riflette direttamente nel valore del tuo brand. Un brand percepito come etico e affidabile pu√≤ ottenere valutazioni pi√π alte e attrarre investitori pi√π solidi e a lungo termine.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="blockchain" class="section">
            <h2>Trasparenza Immutabile.</h2>
            <p>Ogni passo della tua filiera, un blocco di fiducia.</p>
            <div class="blockchain-animation">
                </div>
        </section>

        <section id="ai" class="section dark-section">
            <h2>Intelligenza Artificiale. Zero Punti Ciechi.</h2>
            <p>La nostra IA analizza miliardi di dati per mappare la tua rete di fornitori e identificare rischi nascosti.</p>
            <div class="chart-container">
                <div id="ai-network-container">
                    <div id="ai-text-overlay">Analisi in corso...</div>
                    <canvas id="ai-network"></canvas>
                </div>
            </div>
        </section>

        <section id="bilancio" class="section">
            <h2>Salute Finanziaria & Integrit√† Legale.</h2>
            <p>Una solida governance non √® solo etica, √® anche un vantaggio competitivo che si riflette nei bilanci.</p>
            <div class="balance-container">
                <div class="balance-info">
                    <h3>Indicatori e Interpretazione</h3>
                    <p>La nostra analisi incrocia il **LegalScore** con gli indicatori di bilancio per fornire una visione completa della solidit√† aziendale.</p>
                    <div class="indicator-data">
                        <p><strong>ROE:</strong> <span class="indicator-value roe">0%</span></p>
                        <p><strong>ROI:</strong> <span class="indicator-value roi">0%</span></p>
                        <p><strong>D/E Ratio:</strong> <span class="indicator-value de-ratio">0%</span></p>
                        <p class="analysis-comment">Un alto LegalScore (<span class="score-percent">95%</span>) √® correlato a un'elevata redditivit√† del capitale (ROE) e a una gestione efficiente del debito (D/E Ratio), dimostrando la solidit√† e l'affidabilit√† dell'azienda.</p>
                    </div>
                </div>
                <canvas id="balanceChart"></canvas>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.id === 'score') {
                            animateScore(95);
                            drawScoreCircle();
                            animateScoreBreakdown();
                        } else if (entry.target.id === 'blockchain') {
                            animateBlockchain();
                        } else if (entry.target.id === 'ai') {
                            initAINetwork();
                        } else if (entry.target.id === 'bilancio') {
                            animateBalanceAnalysis();
                        }
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            observer.observe(document.getElementById('score'));
            observer.observe(document.getElementById('blockchain'));
            observer.observe(document.getElementById('ai'));
            observer.observe(document.getElementById('bilancio'));

            function animateScore(finalScore) {
                const scoreElement = document.getElementById('legalScoreValue');
                const duration = 2000;
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    scoreElement.textContent = Math.floor(progress * finalScore);
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            }

            function drawScoreCircle() {
                const canvas = document.getElementById('score-canvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                const finalScore = parseInt(document.getElementById('legalScoreValue').dataset.finalScore, 10);
                const radius = canvas.width / 2 - 10;
                const endAngle = (2 * Math.PI) * (finalScore / 100);
                let startTimestamp = null;

                function animate(timestamp) {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / 2000, 1);
                    const angle = progress * endAngle;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, canvas.height / 2, radius, 0, 2 * Math.PI);
                    ctx.lineWidth = 15;
                    ctx.strokeStyle = '#e0e0e0';
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, canvas.height / 2, radius, -Math.PI / 2, -Math.PI / 2 + angle);
                    ctx.lineWidth = 15;
                    ctx.strokeStyle = '#3b5998';
                    ctx.stroke();
                    if (progress < 1) {
                        window.requestAnimationFrame(animate);
                    }
                }
                window.requestAnimationFrame(animate);
            }

            function animateScoreBreakdown() {
                const breakdown = document.querySelector('.score-breakdown');
                breakdown.classList.add('active');
                const bars = document.querySelectorAll('.bar-fill');
                const values = document.querySelectorAll('.score-value-breakdown');
                
                bars.forEach((bar, index) => {
                    const score = parseInt(bar.dataset.score, 10);
                    // Calcola la percentuale di riempimento sulla base del massimo punteggio possibile (100)
                    bar.style.width = `${score}%`; 
                    
                    let current = 0;
                    const interval = setInterval(() => {
                        if (current >= score) {
                            clearInterval(interval);
                            values[index].textContent = score;
                        } else {
                            current++;
                            values[index].textContent = current;
                        }
                    }, 20);
                });
            }

            function animateBlockchain() {
                const container = document.querySelector('.blockchain-animation');
                const nodesData = [
                    { icon: 'üçá', label: 'Origine: "Vigneto Siciliano"', data: 'ID Lotto: #F37A' },
                    { icon: 'üç∑', label: 'Lavorazione: "Cantine Legali S.p.a."', data: 'Data: 15/08/2025' },
                    { icon: 'üì¶', label: 'Logistica: "Spedizioni Trasparenti Ltd."', data: 'Codice: A4F-98Y' },
                    { icon: 'üèõÔ∏è', label: 'Certificazione: "LegalTrust"', data: 'Esito: Conforme' }
                ];

                container.innerHTML = '';
                nodesData.forEach((nodeData, index) => {
                    const node = document.createElement('div');
                    node.className = 'blockchain-node';
                    node.innerHTML = `
                        <div class="icon">${nodeData.icon}</div>
                        <p>${nodeData.label}</p>
                        <small>${nodeData.data}</small>
                    `;
                    container.appendChild(node);
                    if (index < nodesData.length - 1) {
                        const arrow = document.createElement('div');
                        arrow.className = 'blockchain-arrow';
                        arrow.innerHTML = '&#8594;';
                        container.appendChild(arrow);
                    }
                    setTimeout(() => {
                        node.classList.add('active');
                    }, index * 500);
                });
            }
            
            function initAINetwork() {
                const sketch = (p) => {
                    let nodes = [];
                    let connections = [];
                    let riskNodes = [];
                    let riskConnections = [];
                    let isAnimating = false;
                    let textOverlay;
                    let isVisible = false;

                    p.setup = () => {
                        const container = document.getElementById('ai-network-container');
                        const canvas = p.createCanvas(container.offsetWidth, 400);
                        canvas.parent('ai-network');
                        p.noLoop();

                        textOverlay = document.getElementById('ai-text-overlay');

                        // Posizionamento nodi principali (fittizi)
                        nodes.push(new Node(p.width / 2, p.height / 2, 'La tua azienda', p.color('#fff')));
                        nodes.push(new Node(p.width * 0.2, p.height * 0.3, 'Fornitore A', p.color('#4bc0c0')));
                        nodes.push(new Node(p.width * 0.8, p.height * 0.7, 'Fornitore B', p.color('#ffcd56')));
                        nodes.push(new Node(p.width * 0.5, p.height * 0.1, 'Fornitore C', p.color('#4bc0c0')));
                        nodes.push(new Node(p.width * 0.3, p.height * 0.7, 'Fornitore D', p.color('#ff6384'))); // Rischio
                        nodes.push(new Node(p.width * 0.7, p.height * 0.2, 'Societ√† E', p.color('#ff6384'))); // Rischio
                        
                        // Connessioni
                        connections.push({ from: nodes[0], to: nodes[1] });
                        connections.push({ from: nodes[0], to: nodes[2] });
                        connections.push({ from: nodes[0], to: nodes[3] });
                        connections.push({ from: nodes[0], to: nodes[4] });
                        connections.push({ from: nodes[4], to: nodes[5] }); // Connessione di rischio tra Fornitore D e Societ√† E

                        const aiSection = document.getElementById('ai');
                        const aiObserver = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting && !isVisible) {
                                    isVisible = true;
                                    textOverlay.style.display = 'block';
                                    setTimeout(() => {
                                        textOverlay.style.display = 'none';
                                        isAnimating = true;
                                        p.loop();
                                    }, 2000);

                                    setTimeout(() => {
                                        const infoContainer = document.querySelector('#ai .risk-info');
                                        if (infoContainer) {
                                            infoContainer.innerHTML = `
                                                <h3>Analisi Approfondita</h3>
                                                <p>Il nostro algoritmo ha identificato **1 connessione ad alto rischio**:</p>
                                                <ul class="risk-list">
                                                    <li style="animation-delay: 0s;"><span class="risk-name">Fornitore D</span>: Collegato a **Societ√† E**, coinvolta in un'indagine per frode fiscale.</li>
                                                </ul>
                                            `;
                                        }
                                        riskNodes.push(nodes[4]);
                                        riskNodes.push(nodes[5]);
                                        riskConnections.push({ from: nodes[4], to: nodes[5] });
                                    }, 5000);
                                    aiObserver.unobserve(aiSection);
                                }
                            });
                        }, { threshold: 0.5 });
                        aiObserver.observe(aiSection);
                    };

                    p.draw = () => {
                        p.background('#222');
                        
                        p.strokeWeight(1);
                        p.stroke(p.color(200, 200, 200, 100));
                        for (let conn of connections) {
                            p.line(conn.from.x, conn.from.y, conn.to.x, conn.to.y);
                        }

                        p.strokeWeight(3);
                        p.stroke(p.color(255, 0, 0, 200));
                        for (let conn of riskConnections) {
                            p.line(conn.from.x, conn.from.y, conn.to.x, conn.to.y);
                        }
                        p.noStroke();

                        for (let node of nodes) {
                            node.display();
                        }

                        if (isAnimating) {
                            for (let i = 0; i < nodes.length; i++) {
                                for (let j = i + 1; j < nodes.length; j++) {
                                    let d = p.dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
                                    let attract = (p.width * p.height) / (d * d * 100);
                                    let repel = (nodes[i].size * nodes[j].size) / (d * d * 10);
                                    let force = attract - repel;
                                    let dx = nodes[j].x - nodes[i].x;
                                    let dy = nodes[j].y - nodes[i].y;
                                    nodes[i].vx += force * dx * 0.001;
                                    nodes[i].vy += force * dy * 0.001;
                                    nodes[j].vx -= force * dx * 0.001;
                                    nodes[j].vy -= force * dy * 0.001;
                                }
                                nodes[i].update();
                            }
                        }
                    };
                    
                    class Node {
                        constructor(x, y, label, color) {
                            this.x = x;
                            this.y = y;
                            this.vx = 0;
                            this.vy = 0;
                            this.size = 20;
                            this.label = label;
                            this.color = color;
                        }

                        update() {
                            this.x += this.vx;
                            this.y += this.vy;
                            this.vx *= 0.95;
                            this.vy *= 0.95;
                            this.x = p.constrain(this.x, 20, p.width - 20);
                            this.y = p.constrain(this.y, 20, p.height - 20);
                        }

                        display() {
                            p.fill(this.color);
                            p.ellipse(this.x, this.y, this.size);
                            p.fill(255);
                            p.textAlign(p.CENTER, p.CENTER);
                            p.textSize(10);
                            p.text(this.label, this.x, this.y + this.size / 2 + 5);
                        }
                    }
                };
                new p5(sketch);
            }


            function animateBalanceAnalysis() {
                const roeElement = document.querySelector('.indicator-value.roe');
                const roiElement = document.querySelector('.indicator-value.roi');
                const deElement = document.querySelector('.indicator-value.de-ratio');
                
                function animateValue(element, finalValue, duration = 1500) {
                    let start = 0;
                    const increment = finalValue / (duration / 10);
                    let current = start;
                    const interval = setInterval(() => {
                        current += increment;
                        if (current >= finalValue) {
                            clearInterval(interval);
                            element.textContent = `${finalValue}%`;
                        } else {
                            element.textContent = `${Math.floor(current)}%`;
                        }
                    }, 10);
                }

                animateValue(roeElement, 15);
                animateValue(roiElement, 12);
                animateValue(deElement, 40);

                const ctx = document.getElementById('balanceChart').getContext('2d');
                if (window.balanceChart) {
                    window.balanceChart.destroy();
                }
                const data = {
                    labels: ['Governance', 'LegalScore', 'Performance Finanziaria'],
                    datasets: [{
                        label: 'Correlazione',
                        data: [95, 95, 85],
                        backgroundColor: [
                            '#3b5998',
                            '#4bc0c0',
                            '#ffcd56'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }]
                };

                window.balanceChart = new Chart(ctx, {
                    type: 'bar',
                    data: data,
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            title: {
                                display: true,
                                text: 'Correlazione tra Legalit√† e Performance'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
